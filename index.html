<!DOCTYPE html>
<html>
  <head>
    <style>
 #map {
        width: 100%;
        height: 600px;
     }
    </style>
  </head>
  <body>
    <h3>Visionary Parking Demo</h3>
    <div id="map"></div>
    <script>
      function initMap() {
        var locations = [
          ['ETH Zurich', 47.3763166, 8.5454812, 3],
          ['Albisriederplatz', 47.388355, 8.520145, 2],
          ['Zurch Selnau', 47.373834, 8.530705, 1]
        ];

        var center = {lat: 47.3779416, lng: 8.5380011};

        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 14,
          center: center,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
        });

        var infowindow = new google.maps.InfoWindow();

        var marker, i;

        marker = new google.maps.Marker({
          position: center,
          map: map,
          title: 'Current Location'
        });
        google.maps.event.addListener(marker, 'click', (function(marker) {
          infowindow.setContent('Current Location');
          infowindow.open(map, marker);
        })(marker));

        for (i = 0; i < locations.length; i++) {  
          marker = new google.maps.Marker({
            position: new google.maps.LatLng(locations[i][1], locations[i][2]),
            map: map,
            icon:'https://maps.google.com/mapfiles/kml/shapes/parking_lot_maps.png'
          });

          google.maps.event.addListener(marker, 'click', (function(marker, i) {
            return function() {
              infowindow.setContent(locations[i][0]);
              infowindow.open(map, marker);
              calculateRoute(center, new google.maps.LatLng(locations[i][1], locations[i][2]), map)
            }
          })(marker, i));
        }
      }

      function calculateRoute(from, to, mapObject) {
        var directionsService = new google.maps.DirectionsService();
        var directionsRequest = {
          origin: from,
          destination: to,
          travelMode: google.maps.DirectionsTravelMode.DRIVING,
          unitSystem: google.maps.UnitSystem.METRIC
        };

        directionsService.route(
          directionsRequest,
          function(response, status)
          {
            if (status == google.maps.DirectionsStatus.OK)
            {
              new google.maps.DirectionsRenderer({
                map: mapObject,
                directions: response
              });
            }
            else
              $("#error").append("Unable to retrieve your route<br />");
          }
        );
      }
    </script>
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC0c801jffkoWzPCdWgfi9eVHYIpvZHbCo&callback=initMap">
    </script>
  </body>
</html>